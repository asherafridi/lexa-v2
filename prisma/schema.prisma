generator client {
  provider = "prisma-client-js"
  previewFeatures = ["multiSchema"] 
  binaryTargets   = ["native"]
}

datasource db {
  provider = "postgresql"
  url      = env("POSTGRESS_URI")
  directUrl = env("POSTGRESS_DIRECT_URI")
  schemas   = ["auth", "public"]
}

model User {
  id       Int     @id @default(autoincrement())
  email    String  @unique
  name     String?
  password String
  subaccount_id String?
  subaccount_key  String?
  verificationToken String?
  status   Boolean @default(false)

  contacts Contact[]
  agents   Agent[]

  @@schema("auth") // Explicitly specify the schema
}

model Contact {
  id     Int     @id @default(autoincrement())
  name   String?
  number String
  userId Int
  user   User    @relation(fields: [userId], references: [id])

  @@schema("public") // Explicitly specify the schema
}

model Agent {
  id        Int     @id @default(autoincrement())
  name      String?
  agentType String?
  voice     String
  prompt    String
  numberId  String?
  firstSentence String?
  waitForGreeting String? @default("false")
  maxDuration String? @default("1")
  transferNumber String?
  language String? @default("ENG")
  model String? @default("enhanced")
  userId    Int
  user      User   @relation(fields: [userId], references: [id])
  tools     String?

  @@schema("public") // Explicitly specify the schema
}
